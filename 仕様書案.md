# レシピ管理システム 仕様書案

## 1. 概要

本文書は、レシピ管理システムの開発要件を定義するものです。システムは、レシピデータの管理、アルゴリズムによるデータ処理、そしてユーザーが操作するためのアプリケーションの3つの主要部分から構成されます。

---

## 2. データモデル

システムで扱うレシピデータは、以下の構造を持つJSONオブジェクトの配列として定義します。データは `recipes.json` ファイルに格納します。

### 2.1. Recipe オブジェクト

| フィールド名      | 型                               | 説明                                                                 |
| ----------------- | -------------------------------- | -------------------------------------------------------------------- |
| `id`              | `Integer`                        | レシピを一意に識別する正の整数。                                     |
| `name`            | `String`                         | レシピ名。                                                           |
| `description`     | `String`                         | レシピの簡単な説明。                                                 |
| `servings`        | `Integer`                        | 何人分のレシピかを示す整数。                                         |
| `cookingTime`     | `Integer`                        | 調理にかかるおおよその時間（分）。                                   |
| `ingredients`     | `Array<Ingredient>`              | 材料のリスト。詳細は `2.2. Ingredient オブジェクト` を参照。         |
| `steps`           | `Array<String>`                  | 調理手順を順序通りに格納した文字列の配列。                           |
| `category`        | `String`                         | レシピの分類（例: "主菜", "副菜", "デザート"）。                 |
| `nutrition`       | `Nutrition`                      | 栄養情報。詳細は `2.3. Nutrition オブジェクト` を参照。            |

### 2.2. Ingredient オブジェクト

| フィールド名 | 型               | 説明                                                                 |
| ------------ | ---------------- | -------------------------------------------------------------------- |
| `name`       | `String`         | 材料名。                                                             |
| `amount`     | `Number` or `null` | 量を示す数値。「少々」など数値で表せない場合は `null`。              |
| `unit`       | `String`         | 単位（例: "g", "個", "大さじ"）。`amount` が `null` の場合も単位を設定。 |

### 2.3. Nutrition オブジェクト

| フィールド名    | 型       | 説明                               |
| --------------- | -------- | ---------------------------------- |
| `calories`      | `Number` | カロリー（kcal）。                 |
| `protein`       | `Number` | タンパク質量（g）。                |
| `fat`           | `Number` | 脂質量（g）。                      |
| `carbohydrates` | `Number` | 炭水化物量（g）。                  |

### 2.4. データ例

```json
{
  "id": 1,
  "name": "チキンカレー",
  "description": "スパイスから作る本格的なチキンカレーです。",
  "servings": 4,
  "cookingTime": 45,
  "ingredients": [
    { "name": "鶏もも肉", "amount": 500, "unit": "g" },
    { "name": "カレー粉", "amount": 3, "unit": "大さじ" }
  ],
  "steps": [
    "玉ねぎをみじん切りにし、飴色になるまで炒める。",
    "鶏肉を加えて表面に焼き色をつける。"
  ],
  "category": "主菜",
  "nutrition": {
    "calories": 600,
    "protein": 40,
    "fat": 35,
    "carbohydrates": 30
  }
}
```

---

## 3. アルゴリズム要件

`2. データモデル`で定義したデータ構造を利用して、以下の関数を実装してください。

### 3.1. ソート関数

**重要**: 各言語の標準ライブラリに含まれるソート関数（`Array.prototype.sort` など）は使用禁止とします。

- **関数名**: `customSort`
- **入力**: 
    1.  `recipes: Array<Recipe>` - ソート対象のレシピ配列。
    2.  `orderBy: String` - ソートの基準となるキー。以下のいずれかとする。
        - `"id"`
        - `"name"`
        - `"calories"` (nutritionオブジェクト内の値)
        - `"cookingTime"`
    3.  `order: String` - 並び順。`"asc"` (昇順) または `"desc"` (降順)。
- **出力**: `Array<Recipe>` - ソート済みの新しいレシピ配列。

### 3.2. ナップサック問題関数

カロリーと調理時間の上限内で、タンパク質量を最大化するレシピの組み合わせを求めるナップサック問題の関数を実装してください。

- **関数名**: `solveKnapsack`
- **入力**:
    1.  `recipes: Array<Recipe>` - 利用可能な全レシピの配列。
    2.  `maxCalories: Number` - カロリーの合計上限値。
    3.  `maxCookingTime: Number` - 調理時間の合計上限値（分）。
- **出力**: `Object` - 以下のキーを持つオブジェクト。
    - `selectedRecipeIds: Array<Integer>` - 選択されたレシピのIDの配列。
    - `totalProtein: Number` - 選択されたレシピの合計タンパク質量。

---

## 4. アプリケーション要件

`recipes.json` をデータソースとする、Webベースのレシピ管理アプリケーションを開発してください。バニラのhtml, css, javascriptで制作してください。

### 4.1. 機能要件

1.  **レシピ一覧表示**
    -   アプリケーション起動時、`recipes.json` の全レシピをカード形式で表示すること。
    -   各カードには、最低でも以下の情報を表示すること。
        -   レシピ名 (`name`)
        -   分量 (`servings`)
        -   調理時間 (`cookingTime`)
        -   材料リスト (`ingredients`)
        -   調理手順 (`steps`)
        -   カロリー (`nutrition.calories`)

2.  **レシピソート機能**
    -   ユーザーが `id`, `name`, `calories`, `cookingTime` のいずれかを基準に、レシピ一覧を昇順で並び替えられるUIを実装すること。
    -   この機能は `3.1. ソート関数` を利用して実現すること。

3.  **献立提案機能**
    -   ユーザーが「カロリー上限」と「調理時間上限」を入力できるフォームを設置すること。
    -   フォーム送信時、`3.2. ナップサック問題関数` を実行し、結果（選択されたレシピのリストと合計タンパク質量）を画面に表示すること。

### 4.2. 非機能要件

-   **エラーハンドリング**: `recipes.json` の読み込みに失敗した場合など、エラー発生時にはユーザーに分かりやすいメッセージを表示すること。
-   **拡張性**: 将来的に機能（例: 材料からのレシピ検索）を追加しやすいよう、ロジックとUIの関心を分離した設計を心がけること。

---

## 5. 生成物

1.  **ソースコード**: 上記要件をすべて満たす、実行可能なアプリケーションの全ソースコード。
2.  **サンプルデータ**: 5件以上のデータを含む `recipes.json`。
